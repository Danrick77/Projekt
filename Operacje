import java.util.List;
import java.util.Scanner;

public class Operacje {
	public static void main(String[] args) {
		PersonManager Pm = new PersonManager();
		BookManager Bm = new BookManager();
		System.out.println("Wybierz opcje:");
		System.out.println("[1] Stwórz konto:");
		System.out.println("[2] zaloguj:");
		System.out.println("[3] Wyjdz:");
		Scanner scan = new Scanner (System.in);
		String akcja = scan.nextLine();
		User logged = null;
		if ("1".equals(akcja)) {
	
			System.out.println("Podaj login");
			String NewLogin = scan.nextLine();
			System.out.println("Podaj hasło");
			String NewPassword = scan.nextLine();
			User p1 = new User(NewLogin, NewPassword, 1);
			p1.setLogin(NewLogin);
			p1.setPassword(NewPassword);
			p1.setRole(1);
			
		}
		else if ("2".equals(akcja)); {
			try {
				List<User> UL= Pm.readUsers();
			} catch (Exception e1) {
				e1.printStackTrace();
			}
			Boolean smh = false;
			do {
			System.out.println("Podaj login");
			String Login = scan.nextLine();
			System.out.println("Podaj hasło");
			String Pass = scan.nextLine();
			Boolean correct = false;
			do {
			try {
				for (User U: Pm.readUsers()){
					if (U.getLogin().equals(Login) && U.getPassword().equals(Pass) && U.getRole() == 0) {
						System.out.println("Zalogowano :D");
						correct = true;
						logged = U;
						break;
					}
					
				}
				if (correct = false);
				System.out.println("błędne dane");
				correct = true;
			} catch (Exception e) {
				e.printStackTrace();
			}
		}
			while(correct == false);
			if (logged != null) { 
				smh = true;
			}
			}
			while(smh == false);
			Boolean doLogout = false;
			do {
			System.out.println("[1] lista użytkowników:");
			System.out.println("[2] Usuń użytkownika:");
			System.out.println("[3] Dodaj książkę:");
			System.out.println("[4] Usuń Książkę:");
			System.out.println("[5] Edytuj Książkę:");
			System.out.println("[6] Wyloguj:");
			String action = scan.nextLine();
			if ("1".equals(action)) {
				try {
					for(User U: Pm.readUsers()){
						System.out.println("login: " + U.getLogin());
					}
				} catch (Exception e) {
					e.printStackTrace();
				}
				break;
			}
			if ("2".equals(action)) {
				System.out.println("Podaj login:");
				String login = scan.next();
					try {
						if (!Pm.removeUser(login))
							System.out.println("użytkownika nie ma na liście");
						else
							System.out.println("Usunięto użytkownika z listy");
					} catch (Exception e) {
						e.printStackTrace();
					}
					break;
			}
			if ("3".equals(action)) {
				System.out.println("Podaj tytuł:");
				String NewTitle = scan.nextLine();
				System.out.println("Podaj autora:");
				String NewAuthor = scan.nextLine();
				System.out.println("Podaj gatunek:");
				String NewGenre = scan.nextLine();
				if (scan.hasNextLine());
				try {
					Bm.addBook(NewTitle,NewAuthor,NewGenre);
				} catch (Exception e) {
					e.printStackTrace();
				}
			}
			if ("4".equals(action)) {
				System.out.println("Podaj książkę do usunięcia:");
				String Bookremove = scan.nextLine();
				if (scan.hasNextLine()) scan.nextLine();
				try {
					Bm.removeBook(Bookremove);
				} catch (Exception e) {
					e.printStackTrace();
				}
			}
			if ("6".equals(action)){ 
			doLogout = true;  
			break;
				} else {
			System.out.println("Niewłaściwy login lub hasło");
		}
	} while (doLogout == false);
	
	System.out.println("wyjście.");
	scan.close();
	
	System.out.println("[1] lista książek:");
	System.out.println("[2] wyszukaj po gatunku:");
	System.out.println("[3] wyszukaj :");
	System.out.println("[4] lista książek:");
	String action = scan.nextLine();
	if ("1".equals(action)) {
		try {
			for(Book B: Bm.readBooks()){
				System.out.println("Book: " + B.getTitle());
			}
		} catch (Exception e) {
			e.printStackTrace();
		}
	System.out.println("[2] szukaj po gatunku:");
	if ("2".equals(action)) {
		if ("2".equals(action)) {
			System.out.println("[1] akcja:");
			System.out.println("[2] thriller:");
			System.out.println("[3] dramat:");
			System.out.println("[4] horror:");
			System.out.println("[5] mystery:");
		}
	System.out.println("[3] wyszukaj książkę:");
	String BookTitle = scan.nextLine();
	System.out.println("[4] Wyloguj:");
	if ("4".equals(action)){ 
		doLogout = true;  
	//break;
			} else {
		System.out.println("Niewłaściwy login lub hasło");
			}
					}
				}
			}
		}
	}
